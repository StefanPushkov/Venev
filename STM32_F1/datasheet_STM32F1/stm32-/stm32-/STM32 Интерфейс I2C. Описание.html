<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0072)http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm -->
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru-RU" class="chrome  win"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<title>STM32 Интерфейс I2C. Описание</title>
<script type="text/javascript" src="./STM32 Интерфейс I2C. Описание_files/script.js.Без названия"></script>
<link rel="stylesheet" href="./STM32 Интерфейс I2C. Описание_files/style.css" type="text/css" media="screen">
<!--[if IE 6]><link rel="stylesheet" href="../wp-content/themes/MyController/style.ie6.css" type="text/css" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="../wp-content/themes/MyController/style.ie7.css" type="text/css" media="screen" /><![endif]-->
<link rel="alternate" type="application/rss+xml" title="RSS-лента My Controller" href="http://mycontroller.ru/old_site/feed/default.htm">
<link rel="alternate" type="application/atom+xml" title="Atom-лента My Controller" href="http://mycontroller.ru/old_site/feed/atom/default.htm"> 
<link rel="pingback" href="http://mycontroller.ru/xmlrpc.php">
<link rel="alternate" type="application/rss+xml" title="My Controller » Лента комментариев к «STM32 Интерфейс I2C. Описание»" href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/feed/default.htm">
<link rel="stylesheet" id="msw_wpfm_scan-css" href="./STM32 Интерфейс I2C. Описание_files/wordpress-file-monitor.php@ver=scan" type="text/css" media="all">
<link rel="stylesheet" id="bwp-syntax-css" href="./STM32 Интерфейс I2C. Описание_files/bwp-syntax.css@ver=3.3.1" type="text/css" media="all">
<link rel="stylesheet" id="wp-downloadmanager-css" href="./STM32 Интерфейс I2C. Описание_files/download-css.css@ver=1.50" type="text/css" media="all">
<link rel="stylesheet" id="wp-pagenavi-css" href="./STM32 Интерфейс I2C. Описание_files/pagenavi-css.css@ver=2.70" type="text/css" media="all">
<script type="text/javascript" src="./STM32 Интерфейс I2C. Описание_files/jquery.js@ver=1.7.1"></script>
<script type="text/javascript" src="./STM32 Интерфейс I2C. Описание_files/bwp-syntax.js@ver=3.3.1"></script>
<script type="text/javascript" src="./STM32 Интерфейс I2C. Описание_files/external-tracking.min.js@ver=6.0.2"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://mycontroller.ru/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://mycontroller.ru/old_site/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="STM32 Синтезатор речи “Элиза”. Продолжение" href="http://mycontroller.ru/old_site/stm32-sintezator-rechi-ldquo-eliza-rdquo-prodolzhenie/default.htm">
<meta name="generator" content="WordPress 3.3.1">
<link rel="canonical" href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm">
<link rel="shortlink" href="http://mycontroller.ru/old_site/@p=3496">

<!-- Protected by WP-SpamFree v2.1.1.2 :: JS BEGIN -->
<script type="text/javascript" src="./STM32 Интерфейс I2C. Описание_files/wpsf-js.php"></script> 
<!-- Protected by WP-SpamFree v2.1.1.2 :: JS END -->


<link rel="stylesheet" href="./STM32 Интерфейс I2C. Описание_files/wp-syntax.css" type="text/css" media="screen">
<!-- wpSpoiler Code -->
        <script type="text/javascript">
            function wpSpoilerToggle(spoiler, link, showtext, hidetext) {
                if (spoiler.style.display != 'none') {
                    spoiler.style.display = 'none';
                    link.innerHTML = showtext;
                    link.className = 'spoiler_link_show';
                } else {
                    spoiler.style.display = 'block';
                    link.innerHTML = hidetext;
                    link.className = 'spoiler_link_hide';
                }
            }
          </script>
	<link type="text/css" rel="stylesheet" href="./STM32 Интерфейс I2C. Описание_files/shCore.css">
	<link type="text/css" rel="stylesheet" href="./STM32 Интерфейс I2C. Описание_files/shThemeDefault.css">
<!-- Google Analytics Tracking by Google Analyticator 6.0.2: http://ronaldheft.com/code/analyticator/ -->
<script type="text/javascript">window.google_analytics_uacct = "UA-29082067-1";</script>
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<!--ipt type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-29082067-1']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</scri-->
</head>
<body>
<div id="art-page-background-simple-gradient">
</div>
<div id="art-main">
<div class="art-Sheet">
    <div class="art-Sheet-tl"></div>
    <div class="art-Sheet-tr"></div>
    <div class="art-Sheet-bl"></div>
    <div class="art-Sheet-br"></div>
    <div class="art-Sheet-tc"></div>
    <div class="art-Sheet-bc"></div>
    <div class="art-Sheet-cl"></div>
    <div class="art-Sheet-cr"></div>
    <div class="art-Sheet-cc"></div>
    <div class="art-Sheet-body">
<div class="art-Header">
    <div class="art-Header-png"></div>
    <div class="art-Header-jpeg"></div>
<div class="art-Logo">
    <h1 id="name-text" class="art-Logo-name">
        <a href="http://mycontroller.ru/old_site/default.htm">My Controller</a></h1>
    <div id="slogan-text" class="art-Logo-text">
        Изучаем микроконтроллеры STM32</div>
</div>

</div>
<div class="art-nav">
	<div class="l"></div>
	<div class="r"></div>
	<ul class="art-menu">
		<li><a href="http://mycontroller.ru/old_site/default.htm"><span class="l"></span><span class="r"></span><span class="t">Home</span></a></li><li><span class="art-menu-separator"></span></li><li class="page_item page-item-10"><a href="http://mycontroller.ru/old_site/o-sayte/default.htm"><span class="l"></span><span class="r"></span><span class="t">О сайте</span></a></li><li><span class="art-menu-separator"></span></li>
<li class="page_item page-item-186"><a href="http://mycontroller.ru/old_site/programmyi/default.htm"><span class="l"></span><span class="r"></span><span class="t">СОФТ</span></a></li>
	</ul>
</div>
<div class="art-contentLayout">
<div class="art-content">



<div class="art-Post">
    <div class="art-Post-tl"></div>
    <div class="art-Post-tr"></div>
    <div class="art-Post-bl"></div>
    <div class="art-Post-br"></div>
    <div class="art-Post-tc"></div>
    <div class="art-Post-bc"></div>
    <div class="art-Post-cl"></div>
    <div class="art-Post-cr"></div>
    <div class="art-Post-cc"></div>
    <div class="art-Post-body">
<div class="art-Post-inner art-article">

<div class="art-PostContent">

<div class="navigation">
	<div class="alignleft">« <a href="http://mycontroller.ru/old_site/stm32-sintezator-rechi-ldquo-eliza-rdquo-prodolzhenie/default.htm" rel="prev">STM32 Синтезатор речи “Элиза”. Продолжение</a></div>
	<div class="alignright"></div>
</div>

</div>
<div class="cleared"></div>


</div>

		<div class="cleared"></div>
    </div>
</div>

<div class="art-Post">
    <div class="art-Post-tl"></div>
    <div class="art-Post-tr"></div>
    <div class="art-Post-bl"></div>
    <div class="art-Post-br"></div>
    <div class="art-Post-tc"></div>
    <div class="art-Post-bc"></div>
    <div class="art-Post-cl"></div>
    <div class="art-Post-cr"></div>
    <div class="art-Post-cc"></div>
    <div class="art-Post-body">
<div class="art-Post-inner art-article">
<h2 class="art-PostHeader">
<a href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm" rel="bookmark" title="Постоянная ссылка на STM32 Интерфейс I2C. Описание">
STM32 Интерфейс I2C. Описание</a>
</h2>
<div class="art-PostContent">

          <p>Этот интерфейс двухпроводный (не считая земли). Он позволяет подключить к одной шине несколько устройств, каждое из которых имеет свой адрес. Ведущее устройство руководит процессом обмена. Любое устройство может захватить шину и стать ведущим.</p>
<p>Где может пригодиться шина I2C? Во-первых, существует ряд микросхем, которые управляются по этой шине. Из наиболее часто используемых в любительских устройствах это: датчики температуры, EEPROM-память. Во-вторых, можно объединить несколько контроллеров&nbsp; или сделать некоторые автономные модули, каждый из которых выполняет определенную задачу, и объединить их в одну систему.</p>
<p>В этой статье не будет описания самого интерфейса. На просторах интернета достаточно много информации об этом (мне понравилось описание, приведенное <a href="http://mycontroller.ru/www.itt-ltd.com/reference/ref_i2c.html">здесь</a>).</p>
<p>Какими же возможностями работы с интерфейсом I2C наделили свое детище разработчики&nbsp; микроконтроллеров STM32 ?</p>
<p><span id="more-3496"></span>Модуль I2C контроллера может работать в режиме мастера и в режиме ведомого. Имеется возможность работать в режиме стандартной скорости (до 100 кБит/сек) и повышенной скорости (до 400 кБит/сек).
</p><p>Поддерживает два режима адресации – семи битный и десяти битный.</p>
<p>Также предусмотрены всякие-разные флаги, которые позволяют контролировать состояние шины, ошибки, и конечно прерывания и использование&nbsp; ДМА.</p>
<p>Также предусмотрен&nbsp; аппаратный подсчет CRC, что можно использовать для контроля правильности передачи данных.</p>
<h3 align="center"><span style="font-weight: bold">Обзор регистров</span></h3>
<p>Регистр данных <strong>DR</strong>&nbsp; содержит принятый байт данных и в него загружаем передаваемый байт данных.</p>
<p>Регистр <strong>OAR1</strong> содержит адрес, на который будет откликаться устройство в режиме ведомого. Регистр позволяет работать с 7 и 10 разрядными адресами.</p>
<p><a href="http://mycontroller.ru/old_site/wp-content/uploads/image225.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="./STM32 Интерфейс I2C. Описание_files/image_thumb226.png" width="710" height="88"></a></p>
<p>Разряд <strong>ADDMODE</strong> осуществляет выбор режима адресации: 0 – семиразрядный режим, 1 – десятиразрядный режим. При семиразрядном режиме адрес нужно загружать в разряды 1..7</p>
<p>Для семиразрядной адресации имеется возможность задать два адреса, на которые будет откликаться устройство. Для выбора этого режима и задания второго адреса предназначен регистр <strong>OAR2.</strong></p>
<p><a href="http://mycontroller.ru/old_site/wp-content/uploads/image226.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="./STM32 Интерфейс I2C. Описание_files/image_thumb227.png" width="707" height="72"></a></p>
<p>Разряды 1..7 содержат второй адрес. Разряд <strong>ENDUAL</strong> включает(1)/выключает(0) режим двойной адресации.</p>
<p>Дальше немного сложнее – регистры управления. Их два – CR1 и CR2. CR1 имеет такую структуру:</p>
<p><a href="http://mycontroller.ru/old_site/wp-content/uploads/image227.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="./STM32 Интерфейс I2C. Описание_files/image_thumb228.png" width="712" height="84"></a></p>
<p><strong>PE</strong> – включение(1)/выключение(0) модуля. При включении модуля выводы, которые будут задействованы, конфигурируются как выводы альтернативной ф-ии.</p>
<p><strong>SMBUS,</strong> <strong>SMBTYPE, ENARP</strong> и<strong> ALERT</strong> предназначены для работы в режиме SMBus. Если данный режим не используется,&nbsp; можно записать в них нули и не обращать на эти разряды внимания.</p>
<p><strong>ENPEC</strong> – включает(1)/выключает(0) подсчет аппаратный CRC.</p>
<p><strong>ENGC</strong> — включает(1)/выключает(0) реагирование на широковещательный адрес (0х00).</p>
<p><strong>NOSTRETCH –</strong> разряд, актуальный только для ведомого. Это своего рода “тормоз”. Когда ведомый принял байт данных или адрес (включая бит подтверждения) ему на обработку данных может понадобиться время. Чтобы остановить ведущее устройство ему достаточно притянуть линию SCL к земле и держать её до тех пор, пока он не будет в состоянии обрабатывать данные дальше (это предусмотрено спецификацией интерфейса).</p>
<p>Если этот бит сброшен, то “тормоз” активирован. При совпадении адреса (установлен флаг ADDR) или окончании приёма байта (установлен флаг BTF) устройство будет удерживать SCL в нуле до тех пор, пока не будут сброшены указанные выше флаги. Мастер будет вынужден всё это время ждать.</p>
<p><strong>START</strong> – генерирует сигнал СТАРТ (если устройство в режиме ведомого) или ПОВСТАРТ (устройство в режиме ведущего). Устанавливается программно. Сбросится аппаратно по окончанию формирования сигнала.</p>
<p><strong>STOP</strong> – генерирование сигнала СТОП. В режиме ведущего установка этого разряда приведёт к генерированию сигнала STOP по окончанию передачи текущего байта или сигнала START. Сбросится он аппаратно.</p>
<p><strong>ACK</strong> – если этот разряд установлен, то&nbsp; по окончанию приёма байта или совпадении адреса в ответ будет послан сигнал ACK, если не установлен – NACK.</p>
<p><strong>SWRST</strong> – используется для программного сброса модуля I2C.</p>
<p>&nbsp;</p>
<p>Для настройки I2С одного регистра недостаточно, поэтому существует второй, CR2:</p>
<p><a href="http://mycontroller.ru/old_site/wp-content/uploads/image228.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="./STM32 Интерфейс I2C. Описание_files/image_thumb229.png" width="675" height="73"></a></p>
<p><strong>FREQ[5:0]</strong> – задает частоту тактирования модуля. Значение <strong>FREQ </strong>может изменяться в пределах 2..36, соответственно значение PCLK1 должно находиться в этом диапазоне.</p>
<p><font size="1"><em>Насколько я понял, в эти разряды нужно записать значения частоты тактирования модуля PCLK1, которая зависит от кварца и прочего. Благодаря правильному значению в этих разрядах модуль будет тактироваться частотой, нужной для корректной работы и в режиме FAST и в режиме STANDART (для режима FAST значение PCLK1 должно быть не меньше 10 МГц). Эти разряды актуальны для работы в режиме мастера и ведомого, а вот регистр CCR задает частоту шины, если модуль является мастером.</em></font></p>
<p><strong>ITERREN</strong> – разрешает(1)/запрещает(0) прерывания при обнаружении ошибок (всего семь ошибок).</p>
<p><strong>ITEVTEN</strong> — разрешает(1)/запрещает(0) прерывания при возникновении события.</p>
<p><strong>ITBUFEN</strong> –&nbsp; позволяет запретить/разрешить генерирование прерываний при установке флагов TxE или RxNE. Это полезно при обмене данными через DMA. Если этот разряд сброшен, то возможны все прерывания, кроме прерываний от TxE и RxNE.</p>
<p><strong>DMAEN</strong> — разрешает(1)/запрещает(0) запрос ДМА при установке флагов TxE или RxNE.</p>
<p>&nbsp;</p>
<p>Регистр SR1 содержит следующие флаги:</p>
<p><a href="http://mycontroller.ru/old_site/wp-content/uploads/image229.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="./STM32 Интерфейс I2C. Описание_files/image_thumb230.png" width="678" height="76"></a></p>
<p><strong>SB</strong> – устанавливается, если&nbsp; был сгенерирован сигнал START. Для сброса нужно прочитать SR1 и записать в регистр DR данные.</p>
<p><strong>ADDR</strong> – при работе в режиме мастера устанавливается по окончанию передачи адреса, в режиме ведомого – при совпадении адреса. Для сброса нужно прочитать регистр SR1 затем SR2.</p>
<p><strong>BTF</strong> – флаг окончания передачи/приема байта данных. Для его работы разряд NOSTRETCH регистра CR1 должен быть равен 0.</p>
<p>При работе в режиме приема BTF будет установлен, если принят байт данных (включая ACK), а регистр DR еще не был прочитан.</p>
<p>При работе в режиме передачи BTF будет установлен, если байт данных был передан, а регистр DR еще не были загружены новые данные.</p>
<p>Для сброса BTF нужно прочитать SR1 с последующей записью/чтением DR (или же он сбросится после приема сигнала start или stop).</p>
<p>Флаг BTF не будет установлен, если принят сигнал NACK.</p>
<p><strong>STOPF</strong> – при работе ведомым устанавливается при обнаружении сигнала STOP, если перед этим был сигнал ACK. Сбрасывается чтением SR1 с последующей записью в CR1.</p>
<p><strong>RxNE</strong> – устанавливается, если при работе в режиме приема данных регистр DR не пуст, т.е. принятый байт данных был помещен в DR. Сбрасывается после чтения DR.</p>
<p><strong>TxE</strong> – устанавливается, если при работе в режиме передачи данных регистр данных DR освободился, т.е. байт данных из него был перемещен в сдвиговый регистр передатчика. Чтобы сбросить TxE, нужно записать в DR новые данные, или же он сбросится автоматически при поступлении сигнала start или stop.</p>
<p><strong>BERR </strong>– ошибка шины. Устанавливается при обнаружении сигнала start или stop в “неуместном” месте.</p>
<p>Для сброса BERR необходимо записать в него 0.</p>
<p><strong>ARLO</strong> – флаг потери арбитража (в режиме мастера). Для сброса нужно записать 0.</p>
<p><strong>AF</strong> – устанавливается при получении сигнала NACK. Для сброса нужно записать 0.</p>
<p>&nbsp;</p>
<p>Для управления частотой тактирования шины используется регистр CCR:</p>
<p><a href="http://mycontroller.ru/old_site/wp-content/uploads/image230.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="./STM32 Интерфейс I2C. Описание_files/image_thumb231.png" width="650" height="78"></a></p>
<p><strong>F/S</strong> – выбор скорости (STANDART или FAST режимы)</p>
<p><strong>DUTY </strong>– задает скважность импульса SCL в режиме FAST</p>
<p><strong>CCR[11:0]</strong> – при работе в режиме мастера задает тактовую частоту линии SCL. </p>
<h6><span style="font-weight: bold"></span></h6>
<h3 align="center"><span style="font-weight: bold"></span></h3>
<h3 align="center"><span style="font-weight: bold">Работа модуля I2C в режиме ведомого устройства</span></h3>
<p>Находясь в режиме ведомого, модуль ожидает переход шины в состояние СТАРТ. Обнаружив этот переход оно готово принять первый байт данных, который является адресом устройства.</p>
<p>Приняв байт-адрес устройство сравнивает его с собственным адресом, который находится в регистре OAR1.&nbsp; Если адрес не совпал – уходит в ожидание&nbsp; до следующего СТАРТа.</p>
<p>Если адрес совпал модуль выполняет следующее:</p>
<ol>
<li><strong>Уведомляет об этом ядро</strong>.&nbsp; Для этого модуль устанавливает разряд ADDR регистра SR1. Если при настройке регистра CR2 был установлен разряд ITEVTEN, будет сгенерировано прерывание. </li>
<li><strong>Выдает на шину бит подтверждения ACK.</strong> Данный сигнал будет сформирован, если установлен разряд ACK регистра CR1. Получив бит подтверждения мастер поймет, что ведомое устройство обнаружено и готово к обмену. </li>
</ol>
<p>После принятия байта-адреса флаг TRA регистра CR2 будет определять режим работы модуля: 0 – ведомый приемник, 1 – ведомый передатчик. Значение этого флага&nbsp; зависит от младшего разряда байта-адреса.</p>
<p><em><span style="font-size: xx-small">Помимо основного адреса (регистр OAR1) устройство может откликаться на дополнительный адрес (регистр OAR2). Для этого нужно установить разряд ENDUAL в регистре OAR2. При совпадении будет установлен флаг&nbsp; DUALF. Чтобы модуль реагировал на “широковещательный” адрес (00) необходимо установить разряд ENGC регистра CR1. При обнаружении этого адреса будет установлен флаг GENCALL.</span></em></p>
<p>После&nbsp; установки разряда ADDR модуль будет удерживать линию SCL в нуле, чем приостановит работу мастера.&nbsp; Чтобы его сбросить (и тем самым возобновить работу мастера) необходимо прочитать регистр SR1 с последующим чтением регистра SR2.</p>
<p>После сброса ADDR в зависимости от состояния разряда TRA (а оно определяется младшим разрядом в байте адреса) происходит прием или передача данных.</p>
<p><strong>Режим ведомого передатчика</strong></p>
<p>В этом режиме модуль выдает данные мастеру, который в ответ выдает бит подтверждения ACK или&nbsp; NACK, если он хочет остановить дальнейший прием.</p>
<p>Процесс передачи контролируется флагами TxE и AF.</p>
<p>Разряд TxE устанавливается, если освобожден регистр данных DR и получен от мастера сигнал подтверждения ACK. Установка разряда TxE указывает ведомому, что мастер ожидает очередной байт данных, который нужно загружать в регистр DR.</p>
<p>Если мастер закончил прием данных, он вместо ACK выдает сигнал NACK, что приведёт к установке флага AF в модуле ведомого.</p>
<p><strong>Режим ведомого приемника</strong></p>
<p>В этом режиме модуль принимает данные от мастера и если установлен разряд ACK регистра CR1 выдает бит подтверждения ACK.</p>
<p>Процесс передачи контролируется флагами RxNE и STOPF.</p>
<p>Приняв очередной байт от мастера, ведомый загружает эти данные в регистр DR и выставляет флаг RxNE, который будет сброшен после чтения данных из DR. Если регистр данных не был прочитан (ну не успел контроллер это сделать, был занят), а поступили новые данные, то будет установлен флаг BTF и ведомый потянет линию SCL вниз, приостановив работу мастера до тех пор, пока не будет сброшен этот флаг и прочитаны данные из DR.</p>
<p>По окончанию передачи данных мастер выдаст сигнал STOP, а модуль ведомого установит флаг STOPF.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>продолжение следует…</strong></p>
                  
</div>
<div class="cleared"></div>
<div class="art-PostFooterIcons art-metadata-icons">
Рубрика: <a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/default.htm" title="Просмотреть все записи в рубрике «МИКРОКОНТРОЛЛЕРЫ STM32»" rel="category tag">МИКРОКОНТРОЛЛЕРЫ STM32</a>
</div>

</div>

		<div class="cleared"></div>
    </div>
</div>


<!-- You can start editing here. -->


			<!-- If comments are open, but there are no comments. -->

	 

<div class="art-Post">
    <div class="art-Post-tl"></div>
    <div class="art-Post-tr"></div>
    <div class="art-Post-bl"></div>
    <div class="art-Post-br"></div>
    <div class="art-Post-tc"></div>
    <div class="art-Post-bc"></div>
    <div class="art-Post-cl"></div>
    <div class="art-Post-cr"></div>
    <div class="art-Post-cc"></div>
    <div class="art-Post-body">
<div class="art-Post-inner art-article">

<div class="art-PostContent">

<div id="respond">
  
  <h3>Оставить комментарий</h3>

<div class="cancel-comment-reply">
	<small><a rel="nofollow" id="cancel-comment-reply-link" href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm#respond" style="display:none;">Нажмите, чтобы отменить ответ.</a></small>
</div>


<form action="http://mycontroller.ru/old_site/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1">
<label for="author"><small>Имя </small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2">
<label for="email"><small>E-mail (не публикуется) </small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3">
<label for="url"><small>Web-сайт</small></label></p>


<!--<p><small><strong>XHTML:</strong> Вы можете использовать эту разметку: <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code lang=&quot;&quot;&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; &lt;pre lang=&quot;&quot; extra=&quot;&quot;&gt; </code></small></p>-->

<p><textarea name="comment" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>

<p>
	<span class="art-button-wrapper">
		<span class="l"> </span>
		<span class="r"> </span>
		<input class="art-button" type="submit" name="submit" tabindex="5" value="Отправить">
	</span>
<input type="hidden" name="comment_post_ID" value="3496" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p>
	<script type="text/javascript">
	<!--
	refJS = escape( document[ 'referrer' ] );
	document.write("<input type='hidden' name='refJS' value='"+refJS+"'>");
	// -->
	</script><input type="hidden" name="refJS" value="http%3A//mycontroller.ru/old_site/stm32-sintezator-rechi-ldquo-eliza-rdquo-prodolzhenie/default.htm">
	<p style="font-size:9px;clear:both;">Spam Protection by <a href="http://mycontroller.ru/www.polepositionmarketing.com/library/wp-spamfree/default.htm" title="WP-SpamFree WordPress Anti-Spam Plugin">WP-SpamFree</a></p>

</form>

</div>

</div>
<div class="cleared"></div>


</div>

		<div class="cleared"></div>
    </div>
</div>


</div>
<div class="art-sidebar1">      
<div id="mycategoryorder-2" class="widget widget_mycategoryorder"><div class="art-Block">
    <div class="art-Block-body">
<div class="art-BlockHeader">
    <div class="l"></div>
    <div class="r"></div>
    <div class="art-header-tag-icon">
        <div class="t">Рубрики</div>
    </div>
</div><div class="art-BlockContent">
    <div class="art-BlockContent-tl"></div>
    <div class="art-BlockContent-tr"></div>
    <div class="art-BlockContent-bl"></div>
    <div class="art-BlockContent-br"></div>
    <div class="art-BlockContent-tc"></div>
    <div class="art-BlockContent-bc"></div>
    <div class="art-BlockContent-cl"></div>
    <div class="art-BlockContent-cr"></div>
    <div class="art-BlockContent-cc"></div>
    <div class="art-BlockContent-body">
		<ul>
			<li class="cat-item cat-item-3"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/default.htm" title="Просмотреть все записи в рубрике «МИКРОКОНТРОЛЛЕРЫ STM32»">МИКРОКОНТРОЛЛЕРЫ STM32</a>
<ul class="children">
	<li class="cat-item cat-item-7"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/bootloader/default.htm" title="Просмотреть все записи в рубрике «Bootloader»">Bootloader</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/portyi-vvoda-vyivoda/default.htm" title="Просмотреть все записи в рубрике «GPIO»">GPIO</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/usart/default.htm" title="Просмотреть все записи в рубрике «USART»">USART</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/dma/default.htm" title="Просмотреть все записи в рубрике «DMA»">DMA</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/bkp-registryi/default.htm" title="Просмотреть все записи в рубрике «BKP»">BKP</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/rtc/default.htm" title="Просмотреть все записи в рубрике «RTC»">RTC</a>
</li>
	<li class="cat-item cat-item-16"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/timer/default.htm" title="Просмотреть все записи в рубрике «TIMER»">TIMER</a>
</li>
	<li class="cat-item cat-item-21"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/spi/default.htm" title="Просмотреть все записи в рубрике «SPI»">SPI</a>
</li>
	<li class="cat-item cat-item-24"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/adc/default.htm" title="Просмотреть все записи в рубрике «ADC»">ADC</a>
</li>
	<li class="cat-item cat-item-25"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/dac/default.htm" title="Просмотреть все записи в рубрике «DAC»">DAC</a>
</li>
	<li class="cat-item cat-item-26"><a href="http://mycontroller.ru/old_site/category/mikrokontrolleryi-stm32/usb/default.htm" title="Просмотреть все записи в рубрике «USB»">USB</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-19"><a href="http://mycontroller.ru/old_site/category/vneshnie-ustroystva/default.htm" title="Просмотреть все записи в рубрике «ВНЕШНИЕ УСТРОЙСТВА»">ВНЕШНИЕ УСТРОЙСТВА</a>
<ul class="children">
	<li class="cat-item cat-item-23"><a href="http://mycontroller.ru/old_site/category/vneshnie-ustroystva/termodatchik-ds18b20/default.htm" title="Просмотреть все записи в рубрике «Термодатчик ds18b20»">Термодатчик ds18b20</a>
</li>
	<li class="cat-item cat-item-29"><a href="http://mycontroller.ru/old_site/category/vneshnie-ustroystva/enkoder/default.htm" title="Просмотреть все записи в рубрике «Энкодер»">Энкодер</a>
</li>
	<li class="cat-item cat-item-20"><a href="http://mycontroller.ru/old_site/category/vneshnie-ustroystva/karta-pamyati-sd/default.htm" title="Просмотреть все записи в рубрике «Карта памяти SD»">Карта памяти SD</a>
	<ul class="children">
	<li class="cat-item cat-item-31"><a href="http://mycontroller.ru/old_site/category/vneshnie-ustroystva/karta-pamyati-sd/rabota-s-ffatfs/default.htm" title="Просмотреть все записи в рубрике «Работа с FatFs»">Работа с FatFs</a>
</li>
	</ul>
</li>
</ul>
</li>
	<li class="cat-item cat-item-1"><a href="http://mycontroller.ru/old_site/category/bez-rubriki/default.htm" title="Просмотреть все записи в рубрике «МОИ ПРОЕКТЫ»">МОИ ПРОЕКТЫ</a>
<ul class="children">
	<li class="cat-item cat-item-6"><a href="http://mycontroller.ru/old_site/category/bez-rubriki/chasyi-na-stm32f100rb/default.htm" title="Просмотреть все записи в рубрике «Часы на STM32F100RB»">Часы на STM32F100RB</a>
</li>
	<li class="cat-item cat-item-28"><a href="http://mycontroller.ru/old_site/category/bez-rubriki/umnyiy-dom/default.htm" title="Просмотреть все записи в рубрике «Умный Дом»">Умный Дом</a>
</li>
	<li class="cat-item cat-item-30"><a href="http://mycontroller.ru/old_site/category/bez-rubriki/waveplayer/default.htm" title="Просмотреть все записи в рубрике «WavePlayer»">WavePlayer</a>
</li>
	<li class="cat-item cat-item-32"><a href="http://mycontroller.ru/old_site/category/bez-rubriki/sintezator-eliza/default.htm" title="Просмотреть все записи в рубрике «Синтезатор &quot;Элиза&quot;»">Синтезатор "Элиза"</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-10"><a href="http://mycontroller.ru/old_site/category/poleznyiy-soft/default.htm" title="Просмотреть все записи в рубрике «ПОЛЕЗНЫЙ СОФТ»">ПОЛЕЗНЫЙ СОФТ</a>
<ul class="children">
	<li class="cat-item cat-item-11"><a href="http://mycontroller.ru/old_site/category/poleznyiy-soft/stm32-generator-koda/default.htm" title="Просмотреть все записи в рубрике «STM32 генератор»">STM32 генератор</a>
</li>
</ul>
</li>
		</ul>
		
		<div class="cleared"></div>
    </div>
</div>

		<div class="cleared"></div>
    </div>
</div>
</div>		<div id="recent-posts-2" class="widget widget_recent_entries"><div class="art-Block">
    <div class="art-Block-body">
		<div class="art-BlockHeader">
    <div class="l"></div>
    <div class="r"></div>
    <div class="art-header-tag-icon">
        <div class="t">Свежие записи</div>
    </div>
</div><div class="art-BlockContent">
    <div class="art-BlockContent-tl"></div>
    <div class="art-BlockContent-tr"></div>
    <div class="art-BlockContent-bl"></div>
    <div class="art-BlockContent-br"></div>
    <div class="art-BlockContent-tc"></div>
    <div class="art-BlockContent-bc"></div>
    <div class="art-BlockContent-cl"></div>
    <div class="art-BlockContent-cr"></div>
    <div class="art-BlockContent-cc"></div>
    <div class="art-BlockContent-body">
		<ul>
				<li><a href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm" title="STM32 Интерфейс I2C. Описание">STM32 Интерфейс I2C. Описание</a></li>
				<li><a href="http://mycontroller.ru/old_site/stm32-sintezator-rechi-ldquo-eliza-rdquo-prodolzhenie/default.htm" title="STM32 Синтезатор речи “Элиза”. Продолжение">STM32 Синтезатор речи “Элиза”. Продолжение</a></li>
				<li><a href="http://mycontroller.ru/old_site/stm32-sintezator-rechi-ldquo-eliza-rdquo/default.htm" title="STM32 Синтезатор речи “Элиза”">STM32 Синтезатор речи “Элиза”</a></li>
				<li><a href="http://mycontroller.ru/old_site/stm32-generator-koda-novaya-versiya/default.htm" title="STM32 Генератор кода. Новая версия">STM32 Генератор кода. Новая версия</a></li>
				<li><a href="http://mycontroller.ru/old_site/stm32-generator-koda-konstruktor-komponentov/default.htm" title="STM32 “Конструктор компонентов” для “Генератора кода”">STM32 “Конструктор компонентов” для “Генератора кода”</a></li>
				</ul>
		
		<div class="cleared"></div>
    </div>
</div>

		<div class="cleared"></div>
    </div>
</div>
</div><div id="text-5" class="widget widget_text"><div class="art-Block">
    <div class="art-Block-body">
<div class="art-BlockHeader">
    <div class="l"></div>
    <div class="r"></div>
    <div class="art-header-tag-icon">
        <div class="t">Немного рекламы</div>
    </div>
</div><div class="art-BlockContent">
    <div class="art-BlockContent-tl"></div>
    <div class="art-BlockContent-tr"></div>
    <div class="art-BlockContent-bl"></div>
    <div class="art-BlockContent-br"></div>
    <div class="art-BlockContent-tc"></div>
    <div class="art-BlockContent-bc"></div>
    <div class="art-BlockContent-cl"></div>
    <div class="art-BlockContent-cr"></div>
    <div class="art-BlockContent-cc"></div>
    <div class="art-BlockContent-body">
			<div class="textwidget"><script type="text/javascript"><!--
google_ad_client = "ca-pub-6213925206017237";
/* second */
google_ad_slot = "7273021636";
google_ad_width = 200;
google_ad_height = 200;
//-->
</script>
<acript type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</acript></div>
		
		<div class="cleared"></div>
    </div>
</div>

		<div class="cleared"></div>
    </div>
</div>
</div><div id="linkcat-2" class="widget widget_links"><div class="art-Block">
    <div class="art-Block-body">
<div class="art-BlockHeader">
    <div class="l"></div>
    <div class="r"></div>
    <div class="art-header-tag-icon">
        <div class="t">Ссылки</div>
    </div>
</div><div class="art-BlockContent">
    <div class="art-BlockContent-tl"></div>
    <div class="art-BlockContent-tr"></div>
    <div class="art-BlockContent-bl"></div>
    <div class="art-BlockContent-br"></div>
    <div class="art-BlockContent-tc"></div>
    <div class="art-BlockContent-bc"></div>
    <div class="art-BlockContent-cl"></div>
    <div class="art-BlockContent-cr"></div>
    <div class="art-BlockContent-cc"></div>
    <div class="art-BlockContent-body">

	<ul class="xoxo blogroll">
<li><a href="http://mycontroller.ru/old_site/forum">Форум сайта</a></li>

	</ul>

		<div class="cleared"></div>
    </div>
</div>

		<div class="cleared"></div>
    </div>
</div>
</div>


<p align="center">

</p>

</div>
</div>
<div class="cleared"></div>




<div class="art-Footer">
    <div class="art-Footer-inner">
                <div class="art-Footer-text">
<p>
<a href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm#">Contact Us</a> | <a href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm#">Terms of Use</a> | <a href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm#">Trademarks</a> | <a href="http://mycontroller.ru/old_site/stm32-interfeys-i2c-opisanie/default.htm#">Privacy Statement</a><br>Copyright © 2009 My Controller. All Rights Reserved.</p>
</div>
    </div>
    <div class="art-Footer-background">
    </div>
</div>

		<div class="cleared"></div>
    </div>
</div>
<div class="cleared"></div>

</div>

<!-- 25 запросов. 0,293 секунд. -->
<div>
<!-- SyntaxHighlighter Stuff -->
<script type="text/javascript" src="./STM32 Интерфейс I2C. Описание_files/shCore.js.Без названия"></script>
<script type="text/javascript">
	SyntaxHighlighter.all();
</script>

</div>


</body></html>